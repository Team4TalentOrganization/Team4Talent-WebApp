ð
„C:\Users\Lucah\Documents\School\2023-2024\IT-Project\Team4Talent-WebApp\StudyGuidance\StudGuidance.Api\Controllers\QuizController.cs
	namespace 	
StudGuidance
 
. 
Api 
. 
Controllers &
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public		 

class		 
QuizController		 
:		  !
ControllerBase		" 0
{

 
private 
readonly 
IQuizRepository (
_questionRepository) <
;< =
public 
QuizController 
( 
IQuizRepository -
questionRepository. @
)@ A
{ 	
_questionRepository 
=  !
questionRepository" 4
;4 5
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetAllQuestions) 8
(8 9
)9 :
{ 	
IReadOnlyList 
< 
Question "
>" #
allQuestions$ 0
=1 2
await3 8
_questionRepository9 L
.L M
GetQuestionsAsyncM ^
(^ _
)_ `
;` a
if 
( 
allQuestions 
. 
Count !
<=" $
$num% &
)& '
{ 
return 
NotFound 
(  
$str  @
)@ A
;A B
} 
return 
Ok 
( 
allQuestions "
)" #
;# $
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetAllDomains) 6
(6 7
)7 8
{   	
IReadOnlyList!! 
<!! 
Option!!  
>!!  !

allDomains!!" ,
=!!- .
await!!/ 4
_questionRepository!!5 H
.!!H I
GetDomainsAsync!!I X
(!!X Y
)!!Y Z
;!!Z [
if## 
(## 

allDomains## 
.## 
Count## 
<=##  "
$num### $
)##$ %
{$$ 
return%% 
NotFound%% 
(%%  
$str%%  >
)%%> ?
;%%? @
}&& 
return(( 
Ok(( 
((( 

allDomains((  
)((  !
;((! "
})) 	
[++ 	
HttpGet++	 
(++ 
$str++ 
)++ 
]++ 
public,, 
async,, 
Task,, 
<,, 
IActionResult,, '
>,,' (
GetAllSubDomains,,) 9
(,,9 :
[,,: ;
	FromQuery,,; D
],,D E
List,,F J
<,,J K
int,,K N
>,,N O
domainId,,P X
),,X Y
{-- 	
IReadOnlyList.. 
<.. 
Option..  
>..  !
allSubDomains.." /
=..0 1
await..2 7
_questionRepository..8 K
...K L
GetSubDomainsAsync..L ^
(..^ _
domainId.._ g
)..g h
;..h i
if00 
(00 
allSubDomains00 
.00 
Count00 "
==00# %
$num00& '
)00' (
{11 
return22 
NotFound22 
(22  
$str22  >
)22> ?
;22? @
}33 
return55 
Ok55 
(55 
allSubDomains55 #
)55# $
;55$ %
}66 	
}77 
}88 ý
qC:\Users\Lucah\Documents\School\2023-2024\IT-Project\Team4Talent-WebApp\StudyGuidance\StudGuidance.Api\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder

 
.

 
Services

 
.

 #
AddEndpointsApiExplorer

 (
(

( )
)

) *
;

* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
var 
connectionString 
= 
builder 
. 
Configuration ,
., -
GetConnectionString- @
(@ A
$strA T
)T U
??V X
throwY ^
new_ b%
InvalidOperationExceptionc |
(| }
$str	} ¯
)
¯ °
;
° ±
builder 
. 
Services 
. 
AddDbContext 
< "
StudyGuidanceDbContext 4
>4 5
(5 6
options6 =
=>> @
options 
. 
UseSqlServer 
( 
connectionString )
)) *
)* +
;+ ,
builder 
. 
Services 
. 
	AddScoped 
< 
IQuizRepository *
,* +
QuizDbRepository, <
>< =
(= >
)> ?
;? @
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. 

UseSwagger 
( 
) 
; 
app 
. 
UseSwaggerUI 
( 
) 
; 
} 
app 
. 
UseHttpsRedirection 
( 
) 
; 
app 
. 
UseAuthorization 
( 
) 
; 
app   
.   
MapControllers   
(   
)   
;   
app"" 
."" 
Run"" 
("" 
)"" 	
;""	 
